async function loadStatus() {
  const statusEl = document.getElementById('status');
  const timeEl = document.getElementById('time');
  statusEl.textContent = 'Loading...';

  try {
    // Absolute path for GitHub Pages
    const res = await fetch('/cinepolis-status/status.json?' + new Date().getTime());
    if (!res.ok) throw new Error('Failed to fetch status.json');

    const log = await res.json();
    const latest = log[log.length - 1];
    const isUp = latest.status === 'UP';
    statusEl.textContent = isUp ? '✅ Website is UP' : '❌ Website is DOWN';
    statusEl.className = isUp ? 'status up' : 'status down';

    const indiaTime = new Date(latest.checked_at).toLocaleString("en-IN", { timeZone: "Asia/Kolkata" });
    timeEl.textContent = `Last checked: ${indiaTime}`;
  } catch (err) {
    console.error(err);
    statusEl.textContent = '❌ Error loading status';
    statusEl.className = 'status down';
  }
}
