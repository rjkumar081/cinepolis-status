name: Website Uptime Monitor

# Trigger workflow manually or every 1 minute
on:
  workflow_dispatch:  # manual trigger
  schedule:
    - cron: '*/1 * * * *'  # every 1 minute

jobs:
  check-website:
    runs-on: ubuntu-latest

    steps:
      - name: Check website status
        id: check
        run: |
          URL="https://cinepolis.com/in"
          STATUS=$(curl -o /dev/null -s -w "%{http_code}" $URL)
          
          if [ "$STATUS" -eq 200 ]; then
            echo "Website is UP ✅"
            echo "status=up" >> $GITHUB_OUTPUT
          else
            echo "Website is DOWN ❌ (HTTP status: $STATUS)"
            echo "status=down" >> $GITHUB_OUTPUT
          fi

      - name: Ping website
        run: |
          URL="cinepolis.com"
          ping -c 4 $URL

      - name: Display result
        run: |
          echo "Website status: ${{ steps.check.outputs.status }}"
